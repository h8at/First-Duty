<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>مهام 15 يوم - Zero Style</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Tajawal', sans-serif;
        margin: 0;
        padding: 0;
        background: #f4f6fc;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        padding-top: 40px;
    }
    .container {
        width: 100%;
        max-width: 1000px;
        background: #fff;
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        padding: 30px;
        animation: fadeIn 1s;
    }
    @keyframes fadeIn {
        from {opacity: 0; transform: translateY(20px);}
        to {opacity: 1; transform: translateY(0);}
    }
    h1 {
        text-align: center;
        font-size: 2.5em;
        color: #4f46e5;
        margin-bottom: 20px;
    }
    .login-form {
        max-width: 400px;
        margin: 0 auto 30px;
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    .login-form input {
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #ccc;
        font-size: 1em;
    }
    .login-form button {
        padding: 12px;
        border-radius: 10px;
        border: none;
        background-color: #4f46e5;
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.2s;
    }
    .login-form button:hover {
        background-color: #6366f1;
    }
    .task-section {
        display: none;
    }
    .device-info {
        text-align: center;
        margin-bottom: 15px;
        color: #6366f1;
        font-weight: 600;
    }
    .score-bar {
        text-align: center;
        margin-bottom: 20px;
        font-size: 1.2em;
        font-weight: bold;
        color: #10b981;
        background: #fef9c3;
        border-radius: 12px;
        padding: 10px;
        box-shadow: 0 2px 8px #fde68a55;
    }
    .search-bar {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
    }
    .search-bar input {
        width: 300px;
        padding: 10px;
        border-radius: 10px;
        border: 1px solid #a5b4fc;
        outline: none;
    }
    .tables-wrapper {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        justify-content: center;
    }
    .task-table {
        background: #f0f4ff;
        border-radius: 18px;
        padding: 20px;
        min-width: 320px;
        flex: 1 1 320px;
        border: 2px solid #a5b4fc;
    }
    .table-title {
        text-align: center;
        font-weight: 700;
        font-size: 1.3em;
        color: #2563eb;
        margin-bottom: 12px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        padding: 10px;
        text-align: center;
        font-size: 1em;
    }
    th {
        background: #6366f1;
        color: white;
        font-weight: 700;
    }
    tr {
        background: #fff;
        transition: background 0.2s;
    }
    tr:hover {
        background: #e0e7ff;
    }
    td {
        border-bottom: 1px solid #e5e7eb;
    }
    tr:last-child td {
        border-bottom: none;
    }
    .task-checkbox {
        width: 22px;
        height: 22px;
        accent-color: #4f46e5;
        cursor: pointer;
    }
    .task-done {
        background: #bbf7d0 !important;
        color: #065f46;
        font-weight: bold;
    }
</style>
</head>
<body>
<div class="container">

    <h1>مهام 15 يوم 🔥</h1>

    <!-- واجهة تسجيل الدخول -->
    <div class="login-form" id="loginForm">
        <input type="email" id="emailInput" placeholder="أدخل بريدك الإلكتروني">
        <button id="loginBtn">تسجيل الدخول</button>
    </div>

    <!-- قسم المهام -->
    <div class="task-section" id="taskSection">
        <div class="device-info" id="deviceInfo"></div>
        <div class="score-bar" id="scoreBar">نسبة الإنجاز: 0%</div>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="بحث عن تاريخ أو مهمة...">
        </div>
        <div class="tables-wrapper">
            <div class="task-table" id="tableHaider">
                <div class="table-title">حيدر وليد</div>
                <table>
                    <thead>
                        <tr><th>التاريخ</th><th>المهمة</th><th>تم الإنجاز</th></tr>
                    </thead>
                    <tbody id="tbodyHaider"></tbody>
                </table>
            </div>
            <div class="task-table" id="tableMohammed">
                <div class="table-title">محمدباقر حسن</div>
                <table>
                    <thead>
                        <tr><th>التاريخ</th><th>المهمة</th><th>تم الإنجاز</th></tr>
                    </thead>
                    <tbody id="tbodyMohammed"></tbody>
                </table>
            </div>
        </div>
    </div>

</div>

<script>
    // كشف نوع الجهاز
    function detectDevice() {
        const ua = navigator.userAgent;
        if (/Mobi|Android|iPhone|iPad|iPod/i.test(ua)) {
            document.body.classList.remove('laptop');
            return "أنت تستخدم جهاز موبايل 📱";
        } else {
            document.body.classList.add('laptop');
            return "أنت تستخدم لابتوب أو كمبيوتر 💻";
        }
    }

    // التواريخ والمهام
    const startDay = 22;
    const month = 9;
    const year = new Date().getFullYear();
    const tasks = [];
    for(let i=0;i<15;i++){
        const arabicNumbers = ["أول","ثاني","ثالث","رابع","خامس","سادس","سابع","ثامن","تاسع","عاشر","حادي عشر","ثاني عشر","ثالث عشر","رابع عشر"];
        let title = i===14?"آخر 20 دقيقة من الكورس 🎉":`${arabicNumbers[i]} 20 دقيقة من كورس الـ 4 ساعات 🚀`;
        tasks.push({date:`${year}/${month<10?'0'+month:month}/${(startDay+i)<10?'0'+(startDay+i):(startDay+i)}`, title});
    }

    // حالة المهام
    let checkedHaider = Array(15).fill(false);
    let checkedMohammed = Array(15).fill(false);

    // حفظ واسترجاع التقدم باستخدام البريد
    function saveProgress(email){
        localStorage.setItem(`progress_${email}_haider`, JSON.stringify(checkedHaider));
        localStorage.setItem(`progress_${email}_mohammed`, JSON.stringify(checkedMohammed));
    }

    function loadProgress(email){
        const haiderData = JSON.parse(localStorage.getItem(`progress_${email}_haider`));
        const moData = JSON.parse(localStorage.getItem(`progress_${email}_mohammed`));
        if(haiderData) checkedHaider = haiderData;
        if(moData) checkedMohammed = moData;
    }

    function renderTasks(person, tbodyId, filter=""){
        const tbody = document.getElementById(tbodyId);
        tbody.innerHTML = "";
        const checkedArr = person==="haider"?checkedHaider:checkedMohammed;
        tasks.forEach((task,idx)=>{
            if(task.date.includes(filter)||task.title.includes(filter)){
                const checked = checkedArr[idx];
                const sticker = checked?"✅":"⏳";
                const tr = document.createElement('tr');
                tr.className = checked?"task-done":"";
                tr.innerHTML = `
                    <td>${task.date}</td>
                    <td>${task.title} <span>${sticker}</span></td>
                    <td><input type="checkbox" class="task-checkbox" id="${person}-task${idx}" ${checked?"checked":""}></td>
                `;
                tbody.appendChild(tr);
            }
        });
    }

    function updateScore(){
        const total = tasks.length*2;
        const done = checkedHaider.filter(Boolean).length+checkedMohammed.filter(Boolean).length;
        const percent = Math.round((done/total)*100);
        document.getElementById('scoreBar').textContent=`نسبة الإنجاز: ${percent}% ${percent===100?"🏆":percent>=50?"👏":"💪"}`;
    }

    document.addEventListener('change',function(e){
        if(e.target.classList.contains('task-checkbox')){
            const [person, idxStr] = e.target.id.split('-task');
            const idx = parseInt(idxStr);
            if(person==="haider") checkedHaider[idx]=e.target.checked;
            else checkedMohammed[idx]=e.target.checked;
            renderTasks("haider","tbodyHaider",document.getElementById('searchInput').value.trim());
            renderTasks("mohammed","tbodyMohammed",document.getElementById('searchInput').value.trim());
            updateScore();
            saveProgress(currentEmail);
        }
    });

    document.getElementById('searchInput').addEventListener('input', function(){
        const val=this.value.trim();
        renderTasks("haider","tbodyHaider",val);
        renderTasks("mohammed","tbodyMohammed",val);
    });

    let currentEmail = null;
    document.getElementById('loginBtn').addEventListener('click',()=>{
        const email = document.getElementById('emailInput').value.trim();
        if(email){
            currentEmail = email;
            loadProgress(email);
            renderTasks("haider","tbodyHaider");
            renderTasks("mohammed","tbodyMohammed");
            updateScore();
            document.getElementById('loginForm').style.display='none';
            document.getElementById('taskSection').style.display='block';
            document.getElementById('deviceInfo').textContent = detectDevice();
        } else {
            alert("يرجى إدخال بريد إلكتروني صالح.");
        }
    });
</script>
</body>
</html>
